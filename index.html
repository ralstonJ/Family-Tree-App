<html>
<head>
<title>Family Tree App by Ralston ALmeida </title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js">
</script>
<link rel="icon" type="image/png" href="./icon.png">
<link type="text/css" rel="stylesheet" href="Home.css" />

</head>

<body>
<div class="top-div">
<div class="div_txt"> Welcome to Family Tree</div>

<select id="selectParent"> </select>
<input type="text"  id="txtMemName"></input>
<button id="btn_Add">Add Node</button> 
<button id="btn_Rename">Rename Node</button>
<button id="btn_Delete">Delete Node</button>
<button id="btn_Get_Grand_Node">Get Grand-Parent Node</button>

<div class="div_display">
</div>
<script>
$(document).ready(function(){
	
	var i = 0
	var flyMem = new Array();
	
	function Person(name) 
	{
		this.parent = null;
		this.name = name;
		this.child = false;
	}

		// function to clear objects from <select> and re-load. Also clear TextBox
	function ClearVal(){
	
			$("select").empty();
		$(".div_display").empty();
		for(var key in flyMem){
			
			$("select").append("<option value='"+key+"'>"+ flyMem[key].name +"</option>");
			$(".div_display").append("<p>" + flyMem[key].name + " " + flyMem[key].parent +"</p>");	
		}
		
		$("input").val('');
	
	}
	
	var options = $("option");
	$.each(flyMem, function() {
    options.append($("<option />").val(this.ImageFolderID).text(this.Name));
	});

	
	$("#btn_Add").click(function(){
	
		var txtMemName = $('input:text[id="txtMemName"]').val();
		flyMem[i++] = new Person(txtMemName);
	
		if($( "#selectParent option:selected" ).text())
		{		
			flyMem[i-1].parent =  $("#selectParent").val();
			flyMem[$( "#selectParent option:selected" ).val()].child = true; 
		}
		
		ClearVal();
	});
	
	$("#btn_Rename").click(function(){
		
		var txtMemName = $('input:text[id="txtMemName"]').val();
		var id_flyMem = $("#selectParent").val();
		flyMem[id_flyMem].name = txtMemName;
		
		
		ClearVal();

	});
  
  
	$("#btn_Delete").click(function(){
		
		var id_flyMem = $("#selectParent").val();
		flyMem[id_flyMem].parent = null;
		flyMem[id_flyMem].name = null;
		flyMem[id_flyMem].child = false;
		for(var key in flyMem)
		{
			if( flyMem[key].parent == id_flyMem)
			{
				flyMem[key].name = null;
				flyMem[key].parent = null;
				flyMem[id_flyMem].child = false;
			}
			
			
		
		}
	
		ClearVal();
		
	});
	
	$("#btn_Get_Grand_Node").click(function(){
		
		var id_flyMem = $("#selectParent").val();

		if(flyMem[id_flyMem].parent !=null &&flyMem[flyMem[id_flyMem].parent].parent !=null )
		{
			alert("parent exist!");
		}
		else
			alert("Grand parent does not exist!");
		
		ClearVal();
		
	});	
  });
  
  
  
  
  // Delete 
  
  
  
	/*
	for( var i = 0; i<10;i++)
	{
			document.write ('<div class = "div_txt">' + flyMem[i].name + flyMem[i].parent + '</div>');
	}

	
	document.write ('</br>');
	document.write ('<div class = "div_txt">Delete Members</div>');
	// Delete only node 2
	
	flyMem[1].parent = null;
	// After Delete
	document.write ('</br>');
	document.write ('<div class = "div_txt">After Delete Members</div>');


	for(var key in flyMem)

	{
			document.write ('<div class = "div_txt">' + flyMem[key].name + flyMem[key].parent + '</div>');
	}
	
	document.write ('</br>');
	document.write ('<div class = "div_txt">Deleted Members</div>');

	for(var key in flyMem)
	{
	if(  (key >0 && flyMem[key].parent > 0 && flyMem[key].parent != null &&  flyMem[(flyMem[key].parent)].parent == null) || (key > 0 && flyMem[key].parent == null )  )  
			 	document.write ('<div class = "div_txt">' + flyMem[key].name + flyMem[key].parent +'</div>');
	
	}
	*/
	
	</script>

</div>

</body>

</html>